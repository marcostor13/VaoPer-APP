function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{TxCI:function(e,n,t){"use strict";t.r(n),t.d(n,"EditOffersPageModule",(function(){return w}));var i=t("ofXK"),r=t("3Pt+"),o=t("TEn/"),a=t("tyNb"),c=t("nYR2"),l=t("fXoL"),p=t("H+bZ"),s=t("b6Qw"),d=t("FQVY"),b=t("Vaw3"),g=t("rIor");function u(e,n){1&e&&(l.Wb(0,"div",25),l.Sb(1,"img",26),l.Vb())}function h(e,n){if(1&e){var t=l.Xb();l.Wb(0,"div",27),l.Wb(1,"div",28),l.Wb(2,"div",29),l.Wb(3,"h6",30),l.Jc(4,"Cortar Imagen"),l.Vb(),l.Wb(5,"img",31),l.ec("click",(function(){return l.zc(t),l.ic().handleCancelCortar()})),l.Vb(),l.Vb(),l.Wb(6,"div",4),l.Wb(7,"div",32),l.Wb(8,"div",33),l.Wb(9,"h5"),l.Jc(10,"Cortar Imagen"),l.Vb(),l.Wb(11,"image-cropper",34),l.ec("imageCropped",(function(e){return l.zc(t),l.ic().imageCropped(e)}))("imageLoaded",(function(){return l.zc(t),l.ic().imageLoaded()}))("cropperReady",(function(){return l.zc(t),l.ic().cropperReady()}))("loadImageFailed",(function(){return l.zc(t),l.ic().loadImageFailed()})),l.Vb(),l.Vb(),l.Wb(12,"div",35),l.Wb(13,"h5"),l.Jc(14,"Previsualizar"),l.Vb(),l.Sb(15,"img",36),l.Vb(),l.Vb(),l.Vb(),l.Wb(16,"div",37),l.Wb(17,"button",38),l.ec("click",(function(){return l.zc(t),l.ic().handleOkCortar()})),l.Jc(18,"Terminar"),l.Vb(),l.Vb(),l.Vb(),l.Vb()}if(2&e){var i=l.ic();l.Db(11),l.oc("imageChangedEvent",i.imageChangedEvent)("maintainAspectRatio",!0)("imageQuality",100)("aspectRatio",1)("resizeToWidth",0),l.Db(4),l.oc("src",i.croppedImage,l.Bc)}}var f,m,C,v=function(){return["/tabs-provider/portfolio/offers-provider"]},M=function(e){return{"background-image":e}},x=function(e){return{"text-danger":e}},O=[{path:"",component:(f=function(){function e(n,t,i,r,o,a){var l=this;_classCallCheck(this,e),this.route=n,this.router=t,this.api=i,this.cookie=r,this.general=o,this.storage=a,this.isVisible=!1,this.contentModal=null,this.fileToUpload=null,this.nameInputFile="",this.name="",this.description="",this.price="",this.response="",this.offer={},this.image="",this.startDate="",this.endDate="",this.enable=!0,this.isLoad=!1,this.isVisibleModal=!1,this.isVisibleCortar=!1,this.title="cloudsSorage",this.selectedFile=null,this.previewImage="",this.previewVisible=!1,this.invalid=!1,this.imageChangedEvent="",this.croppedImage="",this.handleUpload=function(e){l.isLoad=!0;var n=Date.now(),t=l.storage.ref("offers/"+n);l.storage.upload("offers/"+n,e).snapshotChanges().pipe(Object(c.a)((function(){l.downloadURL=t.getDownloadURL(),l.downloadURL.subscribe((function(e){e&&(l.croppedImage=e,l.isLoad=!1),console.log("fb",e)}))}))).subscribe((function(e){}))},this.id=this.route.snapshot.paramMap.get("id")}return _createClass(e,[{key:"ngOnInit",value:function(){this.validateSession(),0!=this.id&&this.getOfferByID()}},{key:"validateSession",value:function(){localStorage.getItem("ud")?this.user=JSON.parse(localStorage.getItem("ud")):window.location.href="/login"}},{key:"back",value:function(){window.history.back()}},{key:"getOfferByID",value:function(){var e=this,n={service:"get-offer-by-id",userid:this.user.user.id,offerid:this.id,token:this.user.token};this.api.c("getOfferByID pre",n),this.api.api(n).subscribe((function(n){e.api.c("getOfferByID",n),n.status?(e.name=n.data.name,e.description=n.data.description.replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n").replace("<br />","\n"),e.price=n.data.price,e.croppedImage=n.data.image,e.enable=1==n.data.enable):e.api.c("getOfferByID false",n)}),(function(n){e.api.c("getOfferByID error",n)}))}},{key:"saveOffer",value:function(){var e=this;if(""==this.name||""==this.croppedImage||""==this.name||""==this.description||""==this.price)this.invalid=!0,this.response="Debe completar todos los campos";else{this.isLoad=!0;var n=new FormData;n.append("image",this.croppedImage),n.append("name",this.name),n.append("description",this.description),n.append("price",this.price),n.append("enable",this.enable?"1":"0"),n.append("token",this.user.token),n.append("userid",this.user.user.id),n.append("offerid",this.id),n.append("type","offer");var t=new Headers;t.append("Content-Type","multipart/form-data"),t.append("Accept","application/json"),t.append("Access-Control-Allow-Origin","*");var i={service:"save-offer",data:n,extra:{headers:t}};this.api.c("saveOffer pre",i),this.api.apiUpload(i).subscribe((function(n){e.api.c("saveOffer res",n),e.isLoad=!1,n.status?(e.response=n.message,0==e.id&&(e.name="",e.description="",e.image="",e.startDate="",e.endDate="")):e.api.c("saveOffer",n)}),(function(n){e.api.c("saveOffer error",n)}))}}},{key:"editDescriptionProduct",value:function(){}},{key:"editPriceProduct",value:function(){}},{key:"handleFileInput",value:function(e){this.fileToUpload=null,this.fileToUpload=e.item(0),this.nameInputFile=e.item(0).name,this.api.c("handleFileInput",this.nameInputFile)}},{key:"showModal",value:function(e){this.contentModal=e,this.isVisible=!0}},{key:"fileChangeEvent",value:function(e){this.showModalCortar(),this.imageChangedEvent=e}},{key:"imageCropped",value:function(e){this.croppedImage=e.base64}},{key:"imageLoaded",value:function(){}},{key:"cropperReady",value:function(){}},{key:"loadImageFailed",value:function(){}},{key:"showModalCortar",value:function(){this.isVisibleCortar=!0}},{key:"dataURItoBlob",value:function(e){for(var n=window.atob(e.replace(/^data:image\/(png|jpeg|jpg);base64,/,"")),t=new ArrayBuffer(n.length),i=new Uint8Array(t),r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return new Blob([i],{type:"image/png"})}},{key:"handleOkCortar",value:function(){this.isVisibleCortar=!1;var e=this.dataURItoBlob(this.croppedImage),n=new File([e],"name.png",{type:"image/png"});this.handleUpload(n)}},{key:"handleCancelCortar",value:function(){this.isVisibleCortar=!1}}]),e}(),f.\u0275fac=function(e){return new(e||f)(l.Rb(a.a),l.Rb(a.j),l.Rb(p.a),l.Rb(s.a),l.Rb(d.a),l.Rb(b.a))},f.\u0275cmp=l.Lb({type:f,selectors:[["app-edit-offers"]],decls:42,vars:16,consts:[[1,"pt-3","pr-3","pl-3"],[1,"btn1","pt-2","pb-2",3,"routerLink"],[1,"linea"],[1,"p-3","col-12","col-xl-5","pb-5","mb-5"],[1,"form-group","mt-2"],[1,"text-danger","f-9"],[1,"inputImage","cursor"],["accept","image/*","type","file",1,"form-control",3,"ngModel","change","ngModelChange"],[1,"cursor"],[1,"row","justify-content-center","mtprev"],[1,"row","flex-column","m-0","align-items-center","justify-content-center"],[1,"img-item","m-2",3,"ngStyle"],["type","text","placeholder","Ingrese el nombre",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Ingrese la descripci\xf3n",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Ingrese el precio",1,"form-control",3,"ngModel","ngModelChange"],[1,"sections","row","m-0","align-items-center"],[1,"switch"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"slider","round"],[1,"ml-4","font-700","p-0","mb-2"],[1,"row","justify-content-end","m-0","col-12"],[1,"btn1","font-700","pt-2","pb-2",3,"click"],[1,"text-color4","font-700","text-center",3,"ngClass"],["class","load",4,"ngIf"],["class","modal ",4,"ngIf"],[1,"load"],["src","/assets/img/partials/load.svg"],[1,"modal"],[1,"content-modal","modal2","p-5"],[1,"header-modal","row","m-0","justify-content-between","align-items-center"],[1,"title-modal","font-700","text-color2"],["width","20","src","assets/img/partials/close.svg",3,"click"],[1,"row",2,"margin-top","5%"],[1,"text-center","col-md-8"],["format","png",3,"imageChangedEvent","maintainAspectRatio","imageQuality","aspectRatio","resizeToWidth","imageCropped","imageLoaded","cropperReady","loadImageFailed"],[1,"text-center","col-md-4"],[1,"source-image",3,"src"],[1,"mt-3","row","justify-content-end"],[1,"btn1","pl-3","pr-3","pt-1","pb-1","mr-3",3,"click"]],template:function(e,n){1&e&&(l.Wb(0,"ion-content"),l.Wb(1,"header",0),l.Wb(2,"button",1),l.Jc(3,"Regresar"),l.Vb(),l.Vb(),l.Sb(4,"hr",2),l.Wb(5,"div",3),l.Wb(6,"div",4),l.Wb(7,"label",5),l.Jc(8,"* Requerido"),l.Vb(),l.Wb(9,"div",6),l.Wb(10,"input",7),l.ec("change",(function(e){return n.fileChangeEvent(e)}))("ngModelChange",(function(e){return n.image=e})),l.Vb(),l.Wb(11,"div",8),l.Jc(12,"Seleccione una imagen"),l.Vb(),l.Vb(),l.Vb(),l.Wb(13,"div",9),l.Wb(14,"div",10),l.Sb(15,"div",11),l.Vb(),l.Vb(),l.Wb(16,"div",4),l.Wb(17,"label",5),l.Jc(18,"* Requerido"),l.Vb(),l.Wb(19,"input",12),l.ec("ngModelChange",(function(e){return n.name=e})),l.Vb(),l.Vb(),l.Wb(20,"div",4),l.Wb(21,"label",5),l.Jc(22,"* Requerido"),l.Vb(),l.Wb(23,"input",13),l.ec("ngModelChange",(function(e){return n.description=e})),l.Vb(),l.Vb(),l.Wb(24,"div",4),l.Wb(25,"label",5),l.Jc(26,"* Requerido"),l.Vb(),l.Wb(27,"input",14),l.ec("ngModelChange",(function(e){return n.price=e})),l.Vb(),l.Vb(),l.Wb(28,"div",15),l.Wb(29,"label",16),l.Wb(30,"input",17),l.ec("ngModelChange",(function(e){return n.enable=e})),l.Vb(),l.Sb(31,"span",18),l.Vb(),l.Wb(32,"p",19),l.Jc(33,"Inactiva / Activa"),l.Vb(),l.Vb(),l.Wb(34,"div",20),l.Wb(35,"button",21),l.ec("click",(function(){return n.saveOffer()})),l.Jc(36,"Guardar"),l.Vb(),l.Vb(),l.Wb(37,"div",4),l.Wb(38,"p",22),l.Jc(39),l.Vb(),l.Vb(),l.Vb(),l.Hc(40,u,2,0,"div",23),l.Hc(41,h,19,6,"div",24),l.Vb()),2&e&&(l.Db(2),l.oc("routerLink",l.rc(11,v)),l.Db(8),l.oc("ngModel",n.image),l.Db(5),l.oc("ngStyle",l.sc(12,M,"url("+n.croppedImage+")")),l.Db(4),l.oc("ngModel",n.name),l.Db(4),l.oc("ngModel",n.description),l.Db(4),l.oc("ngModel",n.price),l.Db(3),l.oc("ngModel",n.enable),l.Db(8),l.oc("ngClass",l.sc(14,x,n.invalid)),l.Db(1),l.Kc(n.response),l.Db(1),l.oc("ngIf",n.isLoad),l.Db(1),l.oc("ngIf",n.isVisibleCortar))},directives:[o.d,o.s,a.k,r.b,r.f,r.g,i.m,r.a,i.j,i.l,g.a],styles:['.carrusel[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{background-size:cover;background-repeat:no-repeat;background-position:50%;min-width:100%;min-height:200px;border-radius:16px;padding:10px}.menu[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{min-width:20px;min-height:2px;background-color:#fff}.search[_ngcontent-%COMP%]{flex:1;position:relative}.search[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-moz-placeholder{color:grey;font-size:12pt}.search[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-ms-input-placeholder{color:grey;font-size:12pt}.search[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:grey;font-size:12pt}.search[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:27%;left:20px;max-width:26px}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:12pt;width:100%;border:2.5px solid #ffe266;background-color:transparent;color:#333;border-radius:50px;padding:5px 5px 5px 58px;min-height:60px}.search[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{outline:0}.main-photo[_ngcontent-%COMP%]{border-radius:10px;background-color:#e6e6e6;min-height:260px}.add[_ngcontent-%COMP%]{max-width:40px}.modal[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.4);display:flex;justify-content:center;align-items:flex-start;position:fixed;min-width:100vw;min-height:100vh;top:0;left:0;z-index:100}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{border:0;background-color:#fff;margin-top:80px;border-radius:10px;padding:20px;min-height:100px}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:50px;height:28px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc}.slider[_ngcontent-%COMP%], .slider[_ngcontent-%COMP%]:before{position:absolute;transition:.4s}.slider[_ngcontent-%COMP%]:before{content:"";height:20px;width:20px;left:4px;bottom:4px;background-color:#fff}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#13bf9e}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #13bf9e}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translateX(22px)}.slider.round[_ngcontent-%COMP%]{border-radius:34px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}.image-cropper[_ngcontent-%COMP%]{max-height:500px!important}.modal[_ngcontent-%COMP%]{overflow:auto}.modal2[_ngcontent-%COMP%]{max-width:80%!important;position:absolute;top:150px;margin-bottom:150px;background-color:#fff}.source-image[_ngcontent-%COMP%]{max-width:300px!important}.load[_ngcontent-%COMP%]{position:fixed;top:0;left:0;min-width:100vw;min-height:100vh;background-color:hsla(0,0%,100%,.9);display:flex;justify-content:center;align-items:center}.load[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:.9}@media (max-width:1300px){.modal2[_ngcontent-%COMP%]{max-width:90%!important}}@media (max-width:960px){.modal2[_ngcontent-%COMP%]{max-width:98%!important}}.img-item[_ngcontent-%COMP%]{background-repeat:no-repeat;background-size:cover;background-color:#e6e6e6;background-position:50%;min-width:80px;max-width:80px;max-height:80px;min-height:80px}.inputImage[_ngcontent-%COMP%]{position:relative;cursor:pointer}.inputImage[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;z-index:2}.inputImage[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .inputImage[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;top:0;left:0;border-radius:8px}.inputImage[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;opacity:1;min-width:100%;min-height:46px;background-color:#ffe266;z-index:1}.mtprev[_ngcontent-%COMP%]{margin-top:80px}']}),f)}],y=((C=function e(){_classCallCheck(this,e)}).\u0275mod=l.Pb({type:C}),C.\u0275inj=l.Ob({factory:function(e){return new(e||C)},imports:[[a.l.forChild(O)],a.l]}),C),w=((m=function e(){_classCallCheck(this,e)}).\u0275mod=l.Pb({type:m}),m.\u0275inj=l.Ob({factory:function(e){return new(e||m)},imports:[[i.c,r.c,o.o,y,g.b]]}),m)}}]);