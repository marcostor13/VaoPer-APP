{"version":3,"sources":["./src/app/pages/tabs/chat/chat.page.html","./src/app/pages/tabs/chat/chat-routing.module.ts","./src/app/pages/tabs/chat/chat.module.ts","./src/app/pages/tabs/chat/chat.page.scss","./src/app/pages/tabs/chat/chat.page.ts"],"names":[],"mappings":"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","file":"chat-chat-module-es2015.js","sourcesContent":["export default \"<!-- <ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>chat</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header> -->\\r\\n\\r\\n<ion-content>\\r\\n  <div class=\\\"row m-0 justify-content-center align-items-start vw-100\\\">    \\r\\n    \\r\\n      <div class=\\\"d-none d-xl-flex chats bg-color2 pl-3 pr-3 overflow-auto pb-3 align-items-start\\\">\\r\\n          \\r\\n          <!-- CHAT LIST ITEM -->\\r\\n          <div [ngClass]=\\\"{'bg-color7': chat.receptor == currentReceptor}\\\" *ngFor=\\\"let chat of chats | async\\\" (click)=\\\"getMessages(chat.receptor)\\\" class=\\\"itemChatList cursor  rounded p-2 pl-3 pr-3 mt-3 row m-0 justify-content-center align-items-center\\\">\\r\\n              <div class=\\\"col-2 row m-0 justify-content-center align-items-center\\\">\\r\\n                  <img width=\\\"40\\\" [src]=\\\"dataUsers[chat.receptor] && dataUsers[chat.receptor].imageprofile ? dataUsers[chat.receptor].imageprofile:'/assets/img/partials/user.svg'\\\" alt=\\\"\\\">\\r\\n              </div>\\r\\n              <div class=\\\"chatlistitem flex-1 pl-3\\\">\\r\\n                  <h6 *ngIf=\\\"dataUsers[chat.receptor]\\\" class=\\\"f-11 font-700\\\">{{dataUsers[chat.receptor].name || ''}}</h6>\\r\\n                    <span *ngIf=\\\"getNotification(chat.id) != 0\\\">{{getNotification(chat.id) }}</span>\\r\\n                  <p class=\\\"f-10 p-0 m-0\\\">{{formatDate(chat.date)}}</p>\\r\\n              </div>\\r\\n          </div>\\r\\n\\r\\n      </div>\\r\\n\\r\\n      <div *ngIf=\\\"listChatActive\\\" class=\\\"d-flex d-xl-none chats bg-color2 pl-3 pr-3 overflow-auto pb-3 col-12 align-items-start flex-column justify-content-start\\\">\\r\\n      \\r\\n          <!-- CHAT LIST ITEM -->\\r\\n          <div [ngClass]=\\\"{'bg-color7': chat.receptor == currentReceptor}\\\" *ngFor=\\\"let chat of chats | async\\\" (click)=\\\"getMessages(chat.receptor)\\\" class=\\\"w-100 itemChatList cursor  rounded p-2 pl-3 pr-3 mt-3 row m-0 justify-content-center align-items-center\\\">\\r\\n              <div class=\\\"col-2 row m-0 justify-content-center align-items-center\\\">\\r\\n                  <img width=\\\"40\\\" [src]=\\\"dataUsers[chat.receptor] && dataUsers[chat.receptor].imageprofile ? dataUsers[chat.receptor].imageprofile:'/assets/img/partials/user.svg'\\\" alt=\\\"\\\">\\r\\n              </div>\\r\\n              <div class=\\\"chatlistitem flex-1 pl-3\\\">\\r\\n                  <h6 *ngIf=\\\"dataUsers[chat.receptor]\\\" class=\\\"f-11 font-700\\\">{{dataUsers[chat.receptor].name || ''}}</h6>\\r\\n                  <span *ngIf=\\\"getNotification(chat.id) != 0\\\">{{getNotification(chat.id) }}</span>\\r\\n                  <p class=\\\"f-10 p-0 m-0\\\">{{formatDate(chat.date)}}</p>\\r\\n              </div>\\r\\n          </div>\\r\\n      \\r\\n      </div>\\r\\n\\r\\n      \\r\\n      <div class=\\\"d-none d-xl-flex messages flex-1 overflow-hidden flex-column align-items-center justify-content-between\\\">        \\r\\n\\r\\n          <div #scrollMe class=\\\"display-chat overflow-auto w-100 align-items-center\\\">\\r\\n\\r\\n              <!-- MESSAGE ITEM RIGHT -->\\r\\n              <div [ngClass]=\\\"{'justify-content-end': user.user.id == m.id, 'justify-content-start': user.user.id != m.id}\\\" class=\\\"row m-0 col-12 mt-3 mb-3\\\"  *ngFor=\\\"let m of messages | async\\\">\\r\\n                  <div [ngClass]=\\\"{'bg-color1': user.user.id == m.id, 'bg-color7': user.user.id != m.id}\\\" class=\\\"parraf p-2 pr-3 pl-3 rounded shadow\\\">\\r\\n                      <div class=\\\"row justify-content-end m-0\\\">\\r\\n                          <p class=\\\"f-11\\\">{{m.message}}</p>\\r\\n                      </div>\\r\\n                      <div class=\\\"row justify-content-end m-0\\\">\\r\\n                          <span class=\\\"f-10\\\">{{formatDate(m.date)}}</span>\\r\\n                      </div>\\r\\n                  </div>\\r\\n              </div>         \\r\\n\\r\\n          </div>       \\r\\n\\r\\n          <!-- MESSAGE INPUT -->\\r\\n          <div class=\\\"input-chat col-12 row m-0 justify-content-center\\\">\\r\\n              <div class=\\\"col-10 mt-3\\\">\\r\\n                  <input class=\\\"pl-4 col-12 rounded-pill shadow-lg\\\" type=\\\"text\\\" [(ngModel)]=\\\"textMessage\\\">\\r\\n              </div>\\r\\n              <div class=\\\"flex-1 mt-3\\\">\\r\\n                  <button (keyup.enter)=\\\"sendMessage()\\\" (click)=\\\"sendMessage()\\\" class=\\\"btn1 rounded-pill\\\">Enviar</button>\\r\\n              </div>\\r\\n          </div>\\r\\n      </div>\\r\\n\\r\\n\\r\\n      <!-- RESPONSIVE -->\\r\\n\\r\\n      <div *ngIf=\\\"!listChatActive\\\" class=\\\"d-flex d-xl-none messages flex-1 overflow-hidden d-flex flex-column align-items-center justify-content-between\\\">\\r\\n\\r\\n          <div  class=\\\"col-12 bg-color2 row m-0 justify-content-center p-4\\\">\\r\\n              <button (click)=\\\"listChatActive = true\\\" class=\\\"btn2 pt-2 pb-2 pl-5 pr-5 f-17 font-900\\\">VOLVER A CHATS</button>           \\r\\n          </div>\\r\\n\\r\\n          <div #scrollMe2 class=\\\"display-chat2 overflow-auto w-100 align-items-center\\\">\\r\\n      \\r\\n              <!-- MESSAGE ITEM RIGHT -->\\r\\n              <div [ngClass]=\\\"{'justify-content-end': user.user.id == m.id, 'justify-content-start': user.user.id != m.id}\\\"\\r\\n                  class=\\\"row m-0 col-12 mt-3 mb-3\\\" *ngFor=\\\"let m of messages | async\\\">\\r\\n                  <div [ngClass]=\\\"{'bg-color1': user.user.id == m.id, 'bg-color7': user.user.id != m.id}\\\"\\r\\n                      class=\\\"parraf p-2 pr-3 pl-3 rounded shadow\\\">\\r\\n                      <div class=\\\"row justify-content-end m-0\\\">\\r\\n                          <p class=\\\"f-11\\\">{{m.message}}</p>\\r\\n                      </div>\\r\\n                      <div class=\\\"row justify-content-end m-0\\\">\\r\\n                          <span class=\\\"f-10\\\">{{formatDate(m.date)}}</span>\\r\\n                      </div>\\r\\n                  </div>\\r\\n              </div>       \\r\\n      \\r\\n          </div>\\r\\n      \\r\\n          <!-- MESSAGE INPUT -->\\r\\n          <div class=\\\"input-chat2 col-12 row m-0 justify-content-center\\\">\\r\\n              <div class=\\\"flex-1 mt-3 p-0\\\">\\r\\n                  <input class=\\\"pl-4 col-12 rounded-pill shadow-lg\\\" type=\\\"text\\\" [(ngModel)]=\\\"textMessage\\\">\\r\\n              </div>\\r\\n              <div class=\\\" mt-3 p-0\\\">\\r\\n                  <button (keyup.enter)=\\\"sendMessage()\\\" (click)=\\\"sendMessage()\\\" class=\\\"btnSend bg-color2 pl-2 pr-2 rounded-pill row m-0 justify-content-center align-items-center border-0 ml-2\\\"><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" x=\\\"0px\\\" y=\\\"0px\\\" width=\\\"30\\\" height=\\\"30\\\" viewBox=\\\"0 0 172 172\\\"\\r\\n                      style=\\\" fill:#000000;\\\">\\r\\n                      <g fill=\\\"none\\\" fill-rule=\\\"nonzero\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" stroke-linecap=\\\"butt\\\" stroke-linejoin=\\\"miter\\\"\\r\\n                          stroke-miterlimit=\\\"10\\\" stroke-dasharray=\\\"\\\" stroke-dashoffset=\\\"0\\\" font-family=\\\"none\\\" font-weight=\\\"none\\\"\\r\\n                          font-size=\\\"none\\\" text-anchor=\\\"none\\\" style=\\\"mix-blend-mode: normal\\\">\\r\\n                          <path d=\\\"M0,172v-172h172v172z\\\" fill=\\\"none\\\"></path>\\r\\n                          <g fill=\\\"#ffffff\\\">\\r\\n                              <path\\r\\n                                  d=\\\"M149.06667,17.2c-0.55025,0.00377 -1.09709,0.08674 -1.6237,0.24635c-0.15501,0.04207 -0.30818,0.09064 -0.45911,0.14557l-126.05495,40.08854v0.02239c-2.23962,0.83573 -3.72568,2.97333 -3.72891,5.3638c0.00425,2.00222 1.05271,3.85719 2.76589,4.89349l38.30807,30.39114l75.73151,-60.35677l-60.35677,75.73151l30.36875,38.28567c1.0349,1.7286 2.90117,2.78714 4.91589,2.78828c2.39047,-0.00322 4.52807,-1.48928 5.3638,-3.72891h0.02239l40.12214,-126.16692c0.041,-0.11449 0.07834,-0.23027 0.11198,-0.34714c0.15961,-0.52661 0.24258,-1.07345 0.24636,-1.6237c0,-3.16643 -2.5669,-5.73333 -5.73333,-5.73333z\\\">\\r\\n                              </path>\\r\\n                          </g>\\r\\n                      </g>\\r\\n                  </svg></button>\\r\\n              </div>\\r\\n          </div>\\r\\n      </div>\\r\\n\\r\\n  </div>\\r\\n\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ChatPage } from './chat.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ChatPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ChatPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ChatPageRoutingModule } from './chat-routing.module';\r\n\r\nimport { ChatPage } from './chat.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ChatPageRoutingModule\r\n  ],\r\n  declarations: [ChatPage]\r\n})\r\nexport class ChatPageModule {}\r\n","export default \"/* FONTS */\\n.chats {\\n  height: 93.5vh;\\n}\\n.itemChatList {\\n  background-color: white;\\n}\\n.bg-color7 {\\n  background-color: #d1d1d1 !important;\\n}\\n.messages {\\n  position: relative;\\n}\\n.messages .display-chat {\\n  min-height: 80vh;\\n  max-height: 80vh;\\n}\\n.messages .display-chat .parraf {\\n  max-width: 90%;\\n}\\n.messages .display-chat2 {\\n  min-height: 84vh;\\n  max-height: 84vh;\\n  padding-bottom: 120px;\\n}\\n.messages .display-chat2 .parraf {\\n  max-width: 90%;\\n}\\n.messages .input-chat {\\n  min-height: 15vh;\\n}\\n.messages .input-chat input {\\n  border: solid 2px #ffe266;\\n  min-height: 50px;\\n}\\n.messages .input-chat .btn1 {\\n  min-height: 50px;\\n}\\n.messages .input-chat2 {\\n  position: absolute;\\n  bottom: 4em;\\n}\\n.messages .input-chat2 input {\\n  border: solid 2px #ffe266;\\n  min-height: 50px;\\n}\\n.messages .input-chat2 .btnSend {\\n  min-height: 50px;\\n  min-width: 50px;\\n  max-width: 50px;\\n}\\n.listItem {\\n  background-color: \\\"gray\\\" !important;\\n}\\n.chatlistitem {\\n  position: relative;\\n}\\n.chatlistitem span {\\n  position: absolute;\\n  min-width: 18px;\\n  max-width: 18px;\\n  min-height: 18px;\\n  max-height: 18px;\\n  background-color: red;\\n  color: white;\\n  z-index: 2;\\n  top: 0;\\n  right: 0;\\n  border-radius: 50%;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvdGFicy9jaGF0L0M6XFx3YW1wNjRcXHd3d1xcdmFvcGVydS9zcmNcXHN0eWxlc1xcdmFyaWFibGVzLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL3RhYnMvY2hhdC9DOlxcd2FtcDY0XFx3d3dcXHZhb3BlcnUvc3JjXFxhcHBcXHBhZ2VzXFx0YWJzXFxjaGF0XFxjaGF0LnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvdGFicy9jaGF0L2NoYXQucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFVBQUE7QUNFQTtFQUNJLGNBQUE7QUNBSjtBREdBO0VBQ0ksdUJBQUE7QUNBSjtBREdBO0VBQ0ksb0NBQUE7QUNBSjtBREdBO0VBRUksa0JBQUE7QUNESjtBREdJO0VBQ0ksZ0JBQUE7RUFDQSxnQkFBQTtBQ0RSO0FERVE7RUFDSSxjQUFBO0FDQVo7QURJSTtFQUNJLGdCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxxQkFBQTtBQ0ZSO0FER1E7RUFDSSxjQUFBO0FDRFo7QURLSTtFQUNJLGdCQUFBO0FDSFI7QURJUTtFQUNJLHlCQUFBO0VBQ0EsZ0JBQUE7QUNGWjtBRElRO0VBQ0ksZ0JBQUE7QUNGWjtBRE1JO0VBQ0ksa0JBQUE7RUFDQSxXQUFBO0FDSlI7QURLUTtFQUNJLHlCQUFBO0VBQ0EsZ0JBQUE7QUNIWjtBREtRO0VBQ0ksZ0JBQUE7RUFDQSxlQUFBO0VBQ0EsZUFBQTtBQ0haO0FEUUE7RUFDSSxtQ0FBQTtBQ0xKO0FEU0E7RUFDSSxrQkFBQTtBQ05KO0FET0k7RUFDSSxrQkFBQTtFQUNBLGVBQUE7RUFDQSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSxnQkFBQTtFQUNBLHFCQUFBO0VBQ0EsWUFBQTtFQUNBLFVBQUE7RUFDQSxNQUFBO0VBQ0EsUUFBQTtFQUNBLGtCQUFBO0VBQ0EsYUFBQTtFQUNBLHVCQUFBO0VBQ0EsbUJBQUE7QUNMUiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3RhYnMvY2hhdC9jaGF0LnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIEZPTlRTICovXHJcblxyXG4kZm9udE06IE15cmlhZFBybztcclxuJGZvbnRUOiBUcmVidWNoZXRNUztcclxuXHJcblxyXG4vLyBDT0xPUlMgXHJcblxyXG5cclxuJGNvbG9yMTogI2ZmZTI2NjtcclxuJGNvbG9yMjogIzEzYmY5ZTtcclxuJGNvbG9yMzogIzMzMzMzMztcclxuJGNvbG9yNDogIzRkNGQ0ZDtcclxuJGNvbG9yNTogIzgwODA4MDtcclxuJGNvbG9yNjogI0E5QUJBRTtcclxuJGNvbG9yNzogI2U2ZTZlNjtcclxuJGNvbG9yODogI2VjN2M4YjtcclxuJGNvbG9yOTogIzAwYTE5ODtcclxuJGNvbG9yMTA6ICMzMTQ4OGE7XHJcbiIsIkBpbXBvcnQgJy4uLy4uLy4uLy4uL3N0eWxlcy92YXJpYWJsZXMnO1xyXG5cclxuLmNoYXRze1xyXG4gICAgaGVpZ2h0OiA5My41dmg7XHJcbn1cclxuXHJcbi5pdGVtQ2hhdExpc3R7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxufVxyXG5cclxuLmJnLWNvbG9yN3tcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYigyMDksIDIwOSwgMjA5KSAhaW1wb3J0YW50O1xyXG59XHJcblxyXG4ubWVzc2FnZXN7XHJcblxyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG5cclxuICAgIC5kaXNwbGF5LWNoYXR7ICAgICAgICBcclxuICAgICAgICBtaW4taGVpZ2h0OiA4MHZoO1xyXG4gICAgICAgIG1heC1oZWlnaHQ6IDgwdmg7XHJcbiAgICAgICAgLnBhcnJhZntcclxuICAgICAgICAgICAgbWF4LXdpZHRoOiA5MCU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC5kaXNwbGF5LWNoYXQyeyAgICAgICAgXHJcbiAgICAgICAgbWluLWhlaWdodDogODR2aDtcclxuICAgICAgICBtYXgtaGVpZ2h0OiA4NHZoO1xyXG4gICAgICAgIHBhZGRpbmctYm90dG9tOiAxMjBweDtcclxuICAgICAgICAucGFycmFme1xyXG4gICAgICAgICAgICBtYXgtd2lkdGg6IDkwJTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLmlucHV0LWNoYXR7XHJcbiAgICAgICAgbWluLWhlaWdodDogMTV2aDtcclxuICAgICAgICBpbnB1dHtcclxuICAgICAgICAgICAgYm9yZGVyOiBzb2xpZCAycHggJGNvbG9yMTtcclxuICAgICAgICAgICAgbWluLWhlaWdodDogNTBweDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmJ0bjF7XHJcbiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDUwcHg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC5pbnB1dC1jaGF0MntcclxuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgYm90dG9tOiA0ZW07ICAgICAgICBcclxuICAgICAgICBpbnB1dHtcclxuICAgICAgICAgICAgYm9yZGVyOiBzb2xpZCAycHggJGNvbG9yMTtcclxuICAgICAgICAgICAgbWluLWhlaWdodDogNTBweDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLmJ0blNlbmR7XHJcbiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDUwcHg7XHJcbiAgICAgICAgICAgIG1pbi13aWR0aDogNTBweDtcclxuICAgICAgICAgICAgbWF4LXdpZHRoOiA1MHB4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLmxpc3RJdGVte1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogJ2dyYXknICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcblxyXG4uY2hhdGxpc3RpdGVte1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgc3BhbntcclxuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgbWluLXdpZHRoOiAxOHB4O1xyXG4gICAgICAgIG1heC13aWR0aDogMThweDtcclxuICAgICAgICBtaW4taGVpZ2h0OiAxOHB4O1xyXG4gICAgICAgIG1heC1oZWlnaHQ6IDE4cHg7XHJcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmVkO1xyXG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgICAgICB6LWluZGV4OiAyO1xyXG4gICAgICAgIHRvcDogMDtcclxuICAgICAgICByaWdodDogMDtcclxuICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XHJcbiAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgfVxyXG5cclxufSIsIi8qIEZPTlRTICovXG4uY2hhdHMge1xuICBoZWlnaHQ6IDkzLjV2aDtcbn1cblxuLml0ZW1DaGF0TGlzdCB7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xufVxuXG4uYmctY29sb3I3IHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2QxZDFkMSAhaW1wb3J0YW50O1xufVxuXG4ubWVzc2FnZXMge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG59XG4ubWVzc2FnZXMgLmRpc3BsYXktY2hhdCB7XG4gIG1pbi1oZWlnaHQ6IDgwdmg7XG4gIG1heC1oZWlnaHQ6IDgwdmg7XG59XG4ubWVzc2FnZXMgLmRpc3BsYXktY2hhdCAucGFycmFmIHtcbiAgbWF4LXdpZHRoOiA5MCU7XG59XG4ubWVzc2FnZXMgLmRpc3BsYXktY2hhdDIge1xuICBtaW4taGVpZ2h0OiA4NHZoO1xuICBtYXgtaGVpZ2h0OiA4NHZoO1xuICBwYWRkaW5nLWJvdHRvbTogMTIwcHg7XG59XG4ubWVzc2FnZXMgLmRpc3BsYXktY2hhdDIgLnBhcnJhZiB7XG4gIG1heC13aWR0aDogOTAlO1xufVxuLm1lc3NhZ2VzIC5pbnB1dC1jaGF0IHtcbiAgbWluLWhlaWdodDogMTV2aDtcbn1cbi5tZXNzYWdlcyAuaW5wdXQtY2hhdCBpbnB1dCB7XG4gIGJvcmRlcjogc29saWQgMnB4ICNmZmUyNjY7XG4gIG1pbi1oZWlnaHQ6IDUwcHg7XG59XG4ubWVzc2FnZXMgLmlucHV0LWNoYXQgLmJ0bjEge1xuICBtaW4taGVpZ2h0OiA1MHB4O1xufVxuLm1lc3NhZ2VzIC5pbnB1dC1jaGF0MiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgYm90dG9tOiA0ZW07XG59XG4ubWVzc2FnZXMgLmlucHV0LWNoYXQyIGlucHV0IHtcbiAgYm9yZGVyOiBzb2xpZCAycHggI2ZmZTI2NjtcbiAgbWluLWhlaWdodDogNTBweDtcbn1cbi5tZXNzYWdlcyAuaW5wdXQtY2hhdDIgLmJ0blNlbmQge1xuICBtaW4taGVpZ2h0OiA1MHB4O1xuICBtaW4td2lkdGg6IDUwcHg7XG4gIG1heC13aWR0aDogNTBweDtcbn1cblxuLmxpc3RJdGVtIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogXCJncmF5XCIgIWltcG9ydGFudDtcbn1cblxuLmNoYXRsaXN0aXRlbSB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cbi5jaGF0bGlzdGl0ZW0gc3BhbiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbWluLXdpZHRoOiAxOHB4O1xuICBtYXgtd2lkdGg6IDE4cHg7XG4gIG1pbi1oZWlnaHQ6IDE4cHg7XG4gIG1heC1oZWlnaHQ6IDE4cHg7XG4gIGJhY2tncm91bmQtY29sb3I6IHJlZDtcbiAgY29sb3I6IHdoaXRlO1xuICB6LWluZGV4OiAyO1xuICB0b3A6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufSJdfQ== */\";","import { Component, OnInit, ElementRef, ViewChild } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { ApiService } from 'src/app/services/api.service';\r\nimport { CookieService } from 'ngx-cookie-service';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport * as moment from 'moment';\r\n\r\n@Component({\r\n  selector: 'app-chat',\r\n  templateUrl: './chat.page.html',\r\n  styleUrls: ['./chat.page.scss'],\r\n})\r\nexport class ChatPage implements OnInit {\r\n\r\n  chats: Observable<any[]>;\r\n  user: any;\r\n  dataUsers: any = []\r\n  id: any;\r\n  messages: Observable<any[]>;\r\n  textMessage: String = ''\r\n  currentReceptor: any;\r\n  listChatActive: Boolean = true\r\n  scrollContainer: any;\r\n  scrollContainer2: any;\r\n\r\n  noti: any = []\r\n\r\n  @ViewChild('scrollMe', { static: false }) scrollMe: ElementRef;\r\n  @ViewChild('scrollMe2', { static: false }) scrollMe2: ElementRef;\r\n\r\n  eventsSubject: Subject<void> = new Subject<void>();\r\n\r\n\r\n  constructor(private firestore: AngularFirestore, private api: ApiService, private cookie: CookieService, private router: Router, public route: ActivatedRoute) {\r\n\r\n    this.validateSession()\r\n\r\n    if (this.route.snapshot.paramMap.get('id')){\r\n      this.id = this.route.snapshot.paramMap.get('id')\r\n    }else{\r\n      this.id = '0'\r\n    }\r\n\r\n    //get notifications\r\n    firestore.collection('chatnotification_' + this.user.user.id).valueChanges().subscribe((res: any) => {\r\n\r\n      this.api.c('Notifications', res)\r\n\r\n      this.noti = res;\r\n\r\n\r\n    })\r\n\r\n    //get Chats\r\n    this.chats = firestore.collection('chatlist_' + this.user.user.id, ref=> ref.orderBy('date', 'desc') ).valueChanges();\r\n\r\n    this.chats.forEach((res) => {\r\n      this.api.c('Chats', res)\r\n      res.forEach((item) => {\r\n        this.api.c('Chats item ', item)\r\n        this.getNameReceptop(item.receptor)\r\n      })\r\n    })\r\n\r\n    moment.locale(\"es\");\r\n  }\r\n\r\n  invertChatid(id){\r\n\r\n    let ids= id.split('_')\r\n\r\n    return ids[0] + '_' + ids[2] + '_' + ids[1]\r\n\r\n  }\r\n\r\n  getNotification(id) {\r\n    \r\n\r\n    var notifi = 0;\r\n    for (let index = 0; index < this.noti.length; index++) {\r\n      const element = this.noti[index];\r\n\r\n      if (element.id == this.invertChatid(id)) {\r\n        notifi++\r\n      }\r\n\r\n    }\r\n    return notifi\r\n\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.scrollContainer = this.scrollMe ? this.scrollMe.nativeElement: false;\r\n    this.scrollContainer2 = this.scrollMe2 ? this.scrollMe2.nativeElement : false;\r\n  }\r\n\r\n\r\n  ngOnInit(): void {  \r\n\r\n    if (this.id != 0) {\r\n      setTimeout(()=>{\r\n        this.getMessages(this.id)\r\n      }, 2000)\r\n    }\r\n\r\n  }\r\n\r\n  validateSession() {\r\n    if (!localStorage.getItem('ud') || localStorage.getItem('ud') == '') {\r\n      this.router.navigate(['/login'])\r\n    } else {\r\n      this.user = JSON.parse(localStorage.getItem('ud'))\r\n      this.api.c('user', this.user)\r\n    }\r\n  }\r\n\r\n  formatDate(date) {\r\n    return moment(date.toDate()).calendar();\r\n  }\r\n\r\n\r\n  getNameReceptop(id) {\r\n\r\n    let data = {\r\n      service: 'get-data-user-by-id',\r\n      token: this.user.token,\r\n      userid: id\r\n    }\r\n\r\n    this.api.api(data).subscribe((res: any) => {\r\n      this.api.c('getNameReceptop', res)\r\n      this.dataUsers[id] = res\r\n      this.dataUsers = this.dataUsers\r\n      this.api.c('dataUsers', this.dataUsers)\r\n\r\n    },\r\n      error => {\r\n        this.api.c('getProducts error', error)\r\n      })\r\n\r\n  }\r\n\r\n  \r\n\r\n  async getMessages(idReceptor) {\r\n\r\n    var self = this\r\n    this.listChatActive = false\r\n    let collection = 'chat_' + this.user.user.id + '_' + idReceptor\r\n    let collectionReverse = 'chat_' + idReceptor + '_' + this.user.user.id\r\n    let collectionChatNotification = 'chatnotification_' + this.user.user.id\r\n\r\n    this.firestore.collection(collection).get().subscribe(async res => {\r\n\r\n      this.firestore.collection(collectionChatNotification).get().subscribe((res: any) => {\r\n\r\n        res.docs.forEach(async (doc:any) => {\r\n          this.firestore.collection(collectionChatNotification).doc(doc.id).get().subscribe(async (result:any)=>{\r\n            \r\n            if (result.data().id == 'chat_' + idReceptor + '_' + this.user.user.id){\r\n              await this.firestore.collection(collectionChatNotification).doc(result.id).delete()\r\n            }\r\n          })\r\n          \r\n        });\r\n\r\n      })\r\n\r\n      if (res.size != 0) {\r\n        this.messages = this.firestore.collection(collection, ref => ref.orderBy('date')).valueChanges()\r\n      } else {\r\n        this.messages = this.firestore.collection(collectionReverse, ref => ref.orderBy('date')).valueChanges()\r\n      }\r\n      this.messages.subscribe((res) => {\r\n        setTimeout(() => {\r\n\r\n          self.scrollToBottom()\r\n        }, 2000)\r\n      })\r\n    })\r\n    this.currentReceptor = idReceptor\r\n\r\n  }\r\n\r\n\r\n  sendMessage() {\r\n\r\n\r\n    let data = {\r\n      message: this.textMessage,\r\n      useridOri: this.user.user.id,\r\n      useridDes: this.currentReceptor,\r\n    }\r\n\r\n    this.api.sendMessage(data)\r\n    this.textMessage = ''\r\n    this.scrollToBottom()\r\n\r\n  }\r\n\r\n  scrollToBottom(): void {\r\n    this.scrollContainer = this.scrollMe ? this.scrollMe.nativeElement : false;\r\n    this.scrollContainer2 = this.scrollMe2 ? this.scrollMe2.nativeElement : false;\r\n\r\n    if (this.scrollContainer){\r\n\r\n      this.scrollContainer.scroll({\r\n        top: this.scrollContainer.scrollHeight,\r\n        left: 0,\r\n        behavior: 'smooth'\r\n      });\r\n    }\r\n\r\n\r\n    if (this.scrollContainer2){\r\n      this.scrollContainer2.scroll({\r\n        top: this.scrollContainer2.scrollHeight,\r\n        left: 0,\r\n        behavior: 'smooth'\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}